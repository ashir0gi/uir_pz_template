\chapter{Теоретическая часть}
\section{Использованная модель аппликативной вычислительной среды на основе расширенной предструктуры}
\label{sec:extended-prestructure}

Разрабатываемый Бета-редуктор опирается на формальную модель \textit{аппликативной вычислительной среды} с \emph{расширенной предструктурой}.
Данная модель предоставляет основу для представления термов, механизмов аппликации и редукции \cite{Roslovtsev2011}.

\subsection*{Модель среды}
Предструктура АСВ (аппликативной среды вычислений) представляет собой пару 
$$ (D, F), $$
где $D$ --- это наборы исходных объектов, а $F$ --- набор термообразующих функций.

Расширяемость предструктуры реализована за счет возможности пополнять множества $D$ и $F$
в зависимости от конкретной среды.
В частности такой подход предоставляет преимущество в формализации и сравнительном анализе нескольких сред.

В разработанной системе роль исходных объектов играют атомики --- объекты, реализующие интерфейс \texttt{IAtomic};
роль термообразующих функций --- объекты, реализующие интерфейс \texttt{ITFF}.
Использование механизма полиморфизма через интерфейсы и позволяет реализовать упомянутую расширяемость предструктуры АСВ
(без модификации ядра системы).

\section{Выбор реализуемых стратегий редукции, моделирование пошагового процесса редукции с учётом особенностей модели расширяемой аппликативной среды}
\label{sec:reduction-strategies}

В предлагаемой расширяемой аппликативной среде был сделан упор на описанные Вольфенгагеном подходы в главах 5 и 6 его работы \cite{Wolfengagen2004}, где рассматриваются $\lambda$-исчисление, подстановка и основные понятия редукции.

\subsection{Выбор стратегий редукции}

Для реализации в среде были выбраны следующие стратегии:

\begin{itemize}
  \item \textbf{Нормальный порядок (Normal Order)} — всегда редуцируется самый левый внешний редекс. Гарантирует достижение нормальной формы \cite[§5.2.4, §5.4.2]{Wolfengagen2004}.
  \item \textbf{Аппликативный порядок (Applicative Order)} — сначала редуцируются аргументы, затем функция. Подробно обсуждается в разделе 6.6 подстановки и комбинаторов \cite[§6.6]{Wolfengagen2004}.
  \item \textbf{Call-by-Need (ленивая стратегия)} — нормальный порядок с мемоизацией, минимизирующей повторные вычисления, концептуально основана на идеях графовой редукции и call-by-need, упомянутых Вольфенгагеном в главе 12 \cite{Wolfengagen2004}.
\end{itemize}

\subsection{Пошаговое моделирование редукции}

Модель пошагового редукционного процесса строится на представлении терма как аннотированного синтаксического дерева (\verb|ITerm| с \verb|BRData|). Каждый шаг включает:

\begin{enumerate}
  \item Поиск всех кандидатов-редексов в текущем терме (аннотируются по \texttt{isRedex} и \texttt{priority}).
  \item Выбор конкретного редекса в соответствии со стратегией.
  \item Применение правила бета-редукции:
    \[
      (\lambda x.\,M)\,N \;\to_\beta\; M[x:=N]
    \]
    (формализовано по \cite{Wolfengagen2004}).
  \item Обновление терма и записи шага в историю (\verb|ReductionStep|).
\end{enumerate}

Точность и порядок редукции гарантирует соблюдение конфлюэнтности и корректности, проверяемые средствами тестирования.

\subsection{Интеграция с расширяемой предструктурой}

Благодаря расширяемой предструктуре (глава 4 «Система объектов», стр. 125–131) \cite{Wolfengagen2004}, новые типы термов и редукций могут быть добавлены без изменения основного ядра:

\begin{itemize}
  \item Новые атомики регистрируются в \verb|Environment.brAtomics|;
  \item Дополнительные правила могут быть вставлены в \verb|Environment.brTffs|;
  \item Для каждого атомика задаётся метод \verb|ReduceWithArguments|, отвечающий за семантику редукции.
\end{itemize}

Таким образом, модель стратегий редукции органично вписывается в общую архитектуру среды, описанную Вячеславом Эрнстовичем \cite{Wolfengagen2004}.

\section{Разработка структур данных и метаданных для представления конструкций лямбда-исчисления и шагов редукции}
\label{sec:lambda-structures}


\subsection*{Теоретическая база}

\begin{itemize}
  \item В главе 13 \textit{"Конструкции аппликативного языка"}, в частности в разделах 13.2 \textit{"Выражения"} и 13.3 \textit{"Структуры данных"}, подробно рассматривается формальная структура выражений аппликативных языков, в том числе синтаксические классы термов, аппликации и абстракции\cite{Wolfengagen2004}.
  \item В главе 5, раздел 5.5 \textit{"Программирование в терминах $\lambda$-исчисления"} также рассматривается структура термов и трансформации, применимые к ним, с точки зрения классического $\lambda$-исчисления\cite{Wolfengagen2004}.
\end{itemize}


\subsection*{Шаги редукции и метаописание}

Операции редукции описываются в терминах правил преобразования термов. Классическим примером служит $\beta$-редукция:

\[
(\lambda x. M) \, N \rightarrow_\beta M[x := N]
\]

Для формального описания пошагового процесса редукции вводятся понятия:

\begin{itemize}
  \item \textbf{редекс} — подвыражение, удовлетворяющее условиям применения редукции;
  \item \textbf{позиция редекса} — путь в синтаксическом дереве до редуцируемого подтерма;
  \item \textbf{аннотация шагов} — сопоставление термам их положения в последовательности трансформаций.
\end{itemize}

\subsection*{Обобщённое представление}

Типизация в языке реализации выступает в роли метаданных для всех описанных структур данных. Это реализуется за счет функциональных возможностей типового pattern-matching-а и безопасного downcast-а интерфейсов, что позволяет лаконично и эффективно описывать логику работы с различными объектами.
Разделы книги \cite{Wolfengagen2004}, посвящённые структурам данных (особенно 13.3), позволяют формализовать и расширить понятие терма, введя вспомогательные сведения: типы, классы, сигнатуры, семантические свойства и ограничения. Эти дополнения задают необходимый уровень абстракции для формального описания вычислительных процессов на основе термовых конструкций, что стало сподручным для работы с уже готовыми решениями в репозитории, о которых пойдет речь в следующей главе.
\section{Выбор варианта используемого синтаксиса учебного языка}
\label{sec:syntax-choice}

Выбор синтаксической основы учебного языка осуществляется на основе формальных принципов построения аппликативных языков\cite{Wolfengagen2004}. В разделах 13.1~\textit{"Исходные принципы"} и 13.2~\textit{"Выражения"} анализируются подходы к синтаксическому описанию термов, основанных на применении простых и обобщённых конструкций.

\subsection*{Синтаксические принципы}

Основными принципами, положенными в основу выбора синтаксиса, являются:

\begin{itemize}
  \item \textbf{Аппликативность} — выражения строятся на основе последовательного применения, без необходимости в инфиксных операциях;
  \item \textbf{Минимализм} — язык использует ограниченное множество синтаксических форм, соответствующих базовым конструкциям $\lambda$-исчисления;
  \item \textbf{Расширяемость} — синтаксис допускает введение новых атомарных элементов и комбинируемых термов;
  \item \textbf{Синтаксическая прозрачность} — синтаксис ориентирован на однозначный разбор, что важно для формального анализа и трансляции.
\end{itemize}

\subsection*{Форма выражений}

Аппликативные выражения, лежащие в основе синтаксиса, включают:

\begin{itemize}
  \item \textbf{Именованные переменные} и \textbf{атомики};
  \item \textbf{Аппликации}, задаваемые либо в инфиксной, либо в префиксной форме;
  \item \textbf{Абстракции}, имеющие форму $\lambda x. M$, где $x$ — формальный параметр, $M$ — тело функции.
\end{itemize}

Особое внимание уделяется правилам построения корректных выражений и допустимости вложенных аппликаций и абстракций.

\subsection*{Семантическое обоснование синтаксиса}

В главе 14 \textit{"Семантика конструкций языка"} \cite{Wolfengagen2004} вводится формальное семантическое описание выражений. Можно выделить:

\begin{itemize}
  \item согласования синтаксических форм с денотационной семантикой;
  \item интерпретации термов в категориальных моделях;
  \item обеспечения согласованности семантики с операционными преобразованиями (в частности, редукциями).
\end{itemize}

Такой подход обеспечивает строгую связь между формой записи выражений и их интерпретацией в рамках аппликативной модели.

\section{Выводы}

В результате проведённого теоретического анализа были сформированы основные принципы и обоснования, положенные в основу реализации Бета-редуктора в рамках расширяемой аппликативной среды:

\begin{itemize}
  \item Модель аппликативной вычислительной среды с расширяемой предструктурой (\cite{Roslovtsev2011}) обеспечивает модульность и масштабируемость за счёт чёткого разделения атомарных объектов и термообразующих функций.
  \item Выбор стратегий редукции (нормальный, аппликативный порядок и call-by-need) охватывает ключевые подходы к вычислениям в $\lambda$-исчислении и позволяет моделировать разнообразные вычислительные сценарии, описанные в \cite{Wolfengagen2004}.
  \item Построение структуры термов и описание шагов редукции опирается на формальную теорию аппликативных языков, что обеспечивает точность и воспроизводимость трансформаций.
  \item Разработка синтаксической основы учебного языка базируется на принципах минимализма, расширяемости и семантической прозрачности, что делает язык удобным как для обучения, так и для формального анализа.
  \item Интеграция всех компонентов возможна благодаря общности и абстрактности модели, предложенной Вольфенгагеном, позволяющей эволюционное расширение среды без пересмотра базовых конструкций.
\end{itemize}

Таким образом, теоретическая основа полностью определяет архитектурные и проектные решения, которые будут предметно реализованы на практике.
